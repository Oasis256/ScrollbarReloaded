/*
MouseTouchScroll v0.1.0b
(c) 2016 Depth Development. http://depthdev.com
License: MIT
*/

"use strict";!function(e){return!e.MouseTouchScroll&&void(e.MouseTouchScroll=function(){function t(t){function s(){}function i(){o(),c(),u.styles.left=-(u.styles.widthAvailable*u.x.scrollPercent),u.content.style.left=u.styles.left+"px",u.styles.top=-(u.styles.heightAvailable*u.y.scrollPercent),u.content.style.top=u.styles.top+"px",u.x.train.style.left=u.styles.width*u.x.scrollPercent-u.x.trainWidth*u.x.scrollPercent+"px",u.y.train.style.top=u.styles.height*u.y.scrollPercent-u.y.trainHeight*u.y.scrollPercent+"px"}function a(){clearTimeout(u.resize),u.resize=setTimeout(i,0)}function l(e,t){u.styles.left+=e,u.styles.left=u.styles.left<-u.styles.widthAvailable?-u.styles.widthAvailable:u.styles.left>0?0:u.styles.left,u.x.scrollPercent=u.styles.left/-u.styles.widthAvailable,u.styles.top+=t,u.styles.top=u.styles.top<-u.styles.heightAvailable?-u.styles.heightAvailable:u.styles.top>0?0:u.styles.top,u.y.scrollPercent=u.styles.top/-u.styles.heightAvailable,u.content.style.left=u.styles.left+"px",u.content.style.top=u.styles.top+"px";var s=1-(u.styles.widthAvailable+u.styles.left)/u.styles.widthAvailable,i=u.styles.width*s,a=u.x.trainWidth*s;u.x.train.style.left=i-a+"px";var l=1-(u.styles.heightAvailable+u.styles.top)/u.styles.heightAvailable,o=u.styles.height*l,r=u.y.trainHeight*l;u.y.train.style.top=o-r+"px"}function o(){u.styles.height=u.instance.offsetHeight,u.styles.heightScroll=u.instance.scrollHeight,u.styles.heightAvailable=u.styles.heightScroll-u.styles.height,u.styles.heightMultiplier=u.styles.heightScroll/u.styles.height,u.styles.width=u.instance.offsetWidth,u.styles.widthScroll=u.instance.scrollWidth,u.styles.widthAvailable=u.styles.widthScroll-u.styles.width,u.styles.widthMultiplier=u.styles.widthScroll/u.styles.width}function n(){u.instance.addEventListener("wheel",function(e){l(e.wheelDeltaX||-e.deltaX,e.wheelDeltaY||-e.deltaY)}),u.x.train.addEventListener("mousedown",function(e){e.preventDefault(),u.mouse.pageXRange=[-e.target.offsetLeft+e.pageX,u.styles.width-e.target.offsetLeft+e.pageX-u.x.trainWidth],u.mouse.pageX=e.pageX,u.mouse.dirX=!0,u.x.track.style.opacity=1,u.y.track.style.opacity=0}),u.y.train.addEventListener("mousedown",function(e){e.preventDefault(),u.mouse.pageYRange=[-e.target.offsetTop+e.pageY,u.styles.height-e.target.offsetTop+e.pageY-u.y.trainHeight],u.mouse.pageY=e.pageY,u.mouse.dirY=!0,u.x.track.style.opacity=0,u.y.track.style.opacity=1}),y.mousemove=function(e){e.preventDefault(),(u.mouse.pageX||u.mouse.pageY)&&(l(u.mouse.dirX&&e.pageX>=u.mouse.pageXRange[0]&&e.pageX<=u.mouse.pageXRange[1]?(u.mouse.pageX-e.pageX)*u.styles.widthMultiplier:0,u.mouse.dirY&&e.pageY>=u.mouse.pageYRange[0]&&e.pageY<=u.mouse.pageYRange[1]?(u.mouse.pageY-e.pageY)*u.styles.heightMultiplier:0),u.mouse.pageX=e.pageX,u.mouse.pageY=e.pageY)},document.addEventListener("mousemove",y.mousemove),y.mouseup=function(e){u.mouse.pageX=0,u.mouse.pageY=0,u.mouse.dirX=!1,u.mouse.dirY=!1,u.x.track.style.removeProperty("opacity"),u.y.track.style.removeProperty("opacity")},document.addEventListener("mouseup",y.mouseup),u.x.train.addEventListener("touchstart",function(e){e.preventDefault(),u.mouse.pageXRange=[-e.target.offsetLeft+e.touches[0].pageX,u.styles.width-e.target.offsetLeft+e.touches[0].pageX-u.x.trainWidth],u.mouse.pageX=e.touches[0].pageX,u.mouse.dirX=!0,u.x.track.style.opacity=1,u.y.track.style.opacity=0}),u.y.train.addEventListener("touchstart",function(e){e.preventDefault(),u.mouse.pageYRange=[-e.target.offsetTop+e.touches[0].pageY,u.styles.height-e.target.offsetTop+e.touches[0].pageY-u.y.trainHeight],u.mouse.pageY=e.touches[0].pageY,u.mouse.dirY=!0,u.x.track.style.opacity=0,u.y.track.style.opacity=1}),u.content.addEventListener("touchstart",function(e){e.preventDefault(),u.mouse.pageX=e.touches[0].pageX,u.mouse.pageY=e.touches[0].pageY,u.mouse.dirX=!0,u.mouse.dirY=!0,u.x.track.style.opacity=1,u.y.track.style.opacity=1}),u.x.train.addEventListener("touchmove",function(e){e.preventDefault(),u.mouse.pageX&&(l((u.mouse.pageX-e.touches[0].pageX)*u.styles.widthMultiplier,0),u.mouse.pageX=e.touches[0].pageX)}),u.y.train.addEventListener("touchmove",function(e){e.preventDefault(),u.mouse.pageY&&(l(0,(u.mouse.pageY-e.touches[0].pageY)*u.styles.heightMultiplier),u.mouse.pageY=e.touches[0].pageY)}),u.content.addEventListener("touchmove",function(e){e.preventDefault(),(u.mouse.pageX||u.mouse.pageY)&&(l(e.touches[0].pageX-u.mouse.pageX,e.touches[0].pageY-u.mouse.pageY),u.mouse.pageX=e.touches[0].pageX,u.mouse.pageY=e.touches[0].pageY)}),u.x.rail.addEventListener("mouseover",function(e){u.y.track.setAttribute(r+"y-track","hide")}),u.x.rail.addEventListener("mouseleave",function(e){u.y.track.setAttribute(r+"y-track","")}),u.y.rail.addEventListener("mouseover",function(e){u.x.track.setAttribute(r+"x-track","hide")}),u.y.rail.addEventListener("mouseleave",function(e){u.x.track.setAttribute(r+"x-track","")}),u.x.rail.addEventListener("click",function(t){if(t.stopPropagation(),t.target===u.x.rail){var s=t.offsetX<e.getComputedStyle(u.x.train,null).getPropertyValue("left").replace(/px/,"")?u.styles.height-20:-u.styles.height+20;l(s,0)}}),u.y.rail.addEventListener("click",function(t){if(t.stopPropagation(),t.target===u.y.rail){var s=t.offsetY<e.getComputedStyle(u.y.train,null).getPropertyValue("top").replace(/px/,"")?u.styles.height-20:-u.styles.height+20;l(0,s)}}),e.addEventListener("resize",a)}function c(){u.x.trainWidth=u.styles.width*(u.styles.width/u.styles.widthScroll),u.x.trainWidth>=u.styles.width?(u.instance.overflowX="auto",u.x.track.style.display="none"):(u.x.track.style.display="block",u.x.train.style.width=u.x.trainWidth+"px"),u.y.trainHeight=u.styles.height*(u.styles.height/u.styles.heightScroll),u.y.trainHeight>=u.styles.height?(u.instance.overflowY="auto",u.y.track.style.display="none"):(u.y.track.style.display="block",u.y.train.style.height=u.y.trainHeight+"px")}var u={content:void 0,instance:t,mouse:{dirX:!1,dirY:!1,pageX:0,pageXRange:[0,0],pageY:0,pageYRange:[0,0]},resize:void 0,styles:{height:0,heightScroll:0,heightAvailable:0,heightMultiplier:0,width:0,widthScroll:0,widthAvailable:0,widthMultiplier:0,top:0,left:0},trainMinLength:10,x:{rail:void 0,scrollPercent:0,track:void 0,train:void 0,trainWidth:0},y:{rail:void 0,scrollPercent:0,track:void 0,train:void 0,trainHeight:0}},y={};return function(){for(u.content=document.createElement("DIV"),u.content.setAttribute(r+"content","");u.instance.firstChild;)u.content.appendChild(u.instance.firstChild);u.instance.appendChild(u.content),u.x.track=document.createElement("DIV"),u.x.track.setAttribute(r+"x-track",""),u.x.rail=document.createElement("DIV"),u.x.rail.setAttribute(r+"x-rail",""),u.x.train=document.createElement("DIV"),u.x.train.setAttribute(r+"x-train",""),u.x.rail.appendChild(u.x.train),u.x.track.appendChild(u.x.rail),t.appendChild(u.x.track),u.y.track=document.createElement("DIV"),u.y.track.setAttribute(r+"y-track",""),u.y.rail=document.createElement("DIV"),u.y.rail.setAttribute(r+"y-rail",""),u.y.train=document.createElement("DIV"),u.y.train.setAttribute(r+"y-train",""),u.y.rail.appendChild(u.y.train),u.y.track.appendChild(u.y.rail),t.appendChild(u.y.track),n(),s=function(){e.removeEventListener("resize",a),document.removeEventListener("mousemove",y.mousemove),document.removeEventListener("mouseup",y.mouseup)},u.instance.setAttribute(r+"bootstrapped","true"),setTimeout(i,17)}(),{destroy:s,reset:i}}function s(){Array.prototype.slice.call(document.querySelectorAll("["+o+"]:not(["+r+"bootstrapped])")).forEach(function(e){l.push(new t(e))})}function i(){for(var e=0,t=l.length;e<t;e++)l[e].destroy()}function a(){for(var e=0,t=l.length;e<t;e++)l[e].reset()}var l=[],o="mouse-touch-scroll",r=o+"-";return s(),{bootstrap:s,destroy:i,reset:a}})}(window);
