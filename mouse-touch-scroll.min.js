/*
  ScrollbarReloaded v1.0.0
  (c) 2016 Depth Development. http://depthdev.com
  License: MIT
*/

!function(t){"use strict";return!t.ScrollbarReloaded&&void(t.ScrollbarReloaded=function(e){function a(e,a){function s(){}function r(){o(),u(),h.styles.left=-(h.styles.widthAvailable*h.x.scrollPercent),h.content.style.left=h.styles.left+"px",h.styles.top=-(h.styles.heightAvailable*h.y.scrollPercent),h.content.style.top=h.styles.top+"px",h.x.train.style.left=h.styles.width*h.x.scrollPercent-h.x.trainWidth*h.x.scrollPercent+"px",h.y.train.style.top=h.styles.height*h.y.scrollPercent-h.y.trainHeight*h.y.scrollPercent+"px",h.x.ignore="false"===h.instance.getAttribute("scrollbar-reloaded-x"),h.y.ignore="false"===h.instance.getAttribute("scrollbar-reloaded-y")}function i(){clearTimeout(h.resize),h.resize=setTimeout(r,d)}function l(t,e){h.styles.left+=t,h.styles.left=h.styles.left<-h.styles.widthAvailable?-h.styles.widthAvailable:h.styles.left>0?0:h.styles.left,h.x.scrollPercent=h.styles.left/-h.styles.widthAvailable,h.styles.top+=e,h.styles.top=h.styles.top<-h.styles.heightAvailable?-h.styles.heightAvailable:h.styles.top>0?0:h.styles.top,h.y.scrollPercent=h.styles.top/-h.styles.heightAvailable,h.scroll(h.x.ignore?0:h.styles.left,h.y.ignore?0:h.styles.top);var a=1-(h.styles.widthAvailable+h.styles.left)/h.styles.widthAvailable,s=h.styles.width*a,r=h.x.trainWidth*a;h.x.train.style.left=s-r+"px";var i=1-(h.styles.heightAvailable+h.styles.top)/h.styles.heightAvailable,l=h.styles.height*i,o=h.y.trainHeight*i;if(h.y.train.style.top=l-o+"px",h.master)for(var c=0,p=n[h.master].length;c<p;c++)n[h.master][c].update(h.x.scrollPercent||0,h.y.scrollPercent||0)}function o(){h.styles.height=h.instance.offsetHeight,h.styles.heightScroll=h.instance.scrollHeight,h.styles.heightAvailable=h.styles.heightScroll-h.styles.height,h.styles.heightMultiplier=h.styles.heightScroll/h.styles.height,h.styles.width=h.instance.offsetWidth,h.styles.widthScroll=h.instance.scrollWidth,h.styles.widthAvailable=h.styles.widthScroll-h.styles.width,h.styles.widthMultiplier=h.styles.widthScroll/h.styles.width}function c(){h.instance.addEventListener("wheel",function(t){t.preventDefault(),t.stopPropagation(),t.wheelDeltaX||t.wheelDeltaY?l(t.wheelDeltaX,t.wheelDeltaY):l(t.deltaMode?16*-t.deltaX:-t.deltaX,t.deltaMode?16*-t.deltaY:-t.deltaY)}),h.x.train.addEventListener("mousedown",function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageXRange=[-t.target.offsetLeft+t.pageX,h.styles.width-t.target.offsetLeft+t.pageX-h.x.trainWidth],h.mouse.pageX=t.pageX,h.mouse.dirX=!0,h.x.track.style.opacity=1,h.x.track.setAttribute("scrollbar-reloaded-x-track","active"),h.y.track.style.opacity=0}),h.y.train.addEventListener("mousedown",function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageYRange=[-t.target.offsetTop+t.pageY,h.styles.height-t.target.offsetTop+t.pageY-h.y.trainHeight],h.mouse.pageY=t.pageY,h.mouse.dirY=!0,h.x.track.style.opacity=0,h.y.track.style.opacity=1,h.y.track.setAttribute("scrollbar-reloaded-y-track","active")}),f.mousemove=function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageX?(l(h.mouse.dirX&&t.pageX>=h.mouse.pageXRange[0]&&t.pageX<=h.mouse.pageXRange[1]?(h.mouse.pageX-t.pageX)*h.styles.widthMultiplier:t.pageX<h.mouse.pageXRange[0]?-h.styles.left:-(h.styles.widthAvailable+h.styles.left),0),h.mouse.pageX=t.pageX):h.mouse.pageY&&(l(0,h.mouse.dirY&&t.pageY>=h.mouse.pageYRange[0]&&t.pageY<=h.mouse.pageYRange[1]?(h.mouse.pageY-t.pageY)*h.styles.heightMultiplier:t.pageY<h.mouse.pageYRange[0]?-h.styles.top:-(h.styles.heightAvailable+h.styles.top)),h.mouse.pageY=t.pageY)},document.addEventListener("mousemove",f.mousemove),f.mouseup=function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageX=0,h.mouse.pageY=0,h.mouse.dirX=!1,h.mouse.dirY=!1,h.x.track.style.removeProperty("opacity"),h.y.track.style.removeProperty("opacity"),h.x.track.setAttribute("scrollbar-reloaded-x-track",""),h.y.track.setAttribute("scrollbar-reloaded-y-track","")},document.addEventListener("mouseup",f.mouseup),h.x.train.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageXRange=[-t.target.offsetLeft+t.touches[0].pageX,h.styles.width-t.target.offsetLeft+t.touches[0].pageX-h.x.trainWidth],h.mouse.pageX=t.touches[0].pageX,h.mouse.dirX=!0,h.x.track.style.opacity=1,h.x.track.setAttribute("scrollbar-reloaded-x-track","active"),h.y.track.style.opacity=0}),h.y.train.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageYRange=[-t.target.offsetTop+t.touches[0].pageY,h.styles.height-t.target.offsetTop+t.touches[0].pageY-h.y.trainHeight],h.mouse.pageY=t.touches[0].pageY,h.mouse.dirY=!0,h.x.track.style.opacity=0,h.y.track.style.opacity=1,h.y.track.setAttribute("scrollbar-reloaded-y-track","active")}),h.content.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageX=t.touches[0].pageX,h.mouse.pageY=t.touches[0].pageY,h.mouse.dirX=!0,h.mouse.dirY=!0,h.x.track.style.opacity=1,h.y.track.style.opacity=1}),h.x.train.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageX&&(l((h.mouse.pageX-t.touches[0].pageX)*h.styles.widthMultiplier,0),h.mouse.pageX=t.touches[0].pageX)}),h.y.train.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation(),h.mouse.pageY&&(l(0,(h.mouse.pageY-t.touches[0].pageY)*h.styles.heightMultiplier),h.mouse.pageY=t.touches[0].pageY)}),h.content.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation(),(h.mouse.pageX||h.mouse.pageY)&&(l(t.touches[0].pageX-h.mouse.pageX,t.touches[0].pageY-h.mouse.pageY),h.mouse.pageX=t.touches[0].pageX,h.mouse.pageY=t.touches[0].pageY)}),h.x.train.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation(),h.x.track.setAttribute("scrollbar-reloaded-x-track",""),h.y.track.setAttribute("scrollbar-reloaded-y-track","")}),h.y.train.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation(),h.x.track.setAttribute("scrollbar-reloaded-x-track",""),h.y.track.setAttribute("scrollbar-reloaded-y-track","")}),h.x.rail.addEventListener("mouseover",function(t){t.preventDefault(),t.stopPropagation(),h.y.track.setAttribute(y+"y-track","hide")}),h.x.rail.addEventListener("mouseleave",function(t){t.preventDefault(),t.stopPropagation(),h.y.track.setAttribute(y+"y-track","")}),h.y.rail.addEventListener("mouseover",function(t){t.preventDefault(),t.stopPropagation(),h.x.track.setAttribute(y+"x-track","hide")}),h.y.rail.addEventListener("mouseleave",function(t){t.preventDefault(),t.stopPropagation(),h.x.track.setAttribute(y+"x-track","")}),h.x.rail.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),e.target===h.x.rail){var a=e.offsetX<t.getComputedStyle(h.x.train,null).getPropertyValue("left").replace(/px/,"")?h.styles.height-20:-h.styles.height+20;l(a,0)}}),h.y.rail.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),e.target===h.y.rail){var a=e.offsetY<t.getComputedStyle(h.y.train,null).getPropertyValue("top").replace(/px/,"")?h.styles.height-20:-h.styles.height+20;l(0,a)}}),t.addEventListener("resize",i)}function u(){h.x.trainWidth=h.styles.width*(h.styles.width/h.styles.widthScroll),h.x.trainWidth=h.x.trainWidth<h.trainMinLength?h.trainMinLength:h.x.trainWidth,h.x.trainWidth>=h.styles.width?(h.instance.overflowX="auto",h.x.track.style.display="none"):(h.x.track.style.display="block",h.x.train.style.width=h.x.trainWidth+"px"),h.y.trainHeight=h.styles.height*(h.styles.height/h.styles.heightScroll),h.y.trainHeight=h.y.trainHeight<h.trainMinLength?h.trainMinLength:h.y.trainHeight,h.y.trainHeight>=h.styles.height?(h.instance.overflowY="auto",h.y.track.style.display="none"):(h.y.track.style.display="block",h.y.train.style.height=h.y.trainHeight+"px")}function g(t,e){l(t*-h.styles.widthAvailable-h.styles.left,e*-h.styles.heightAvailable-h.styles.top)}var h={content:void 0,instance:e,master:a,mouse:{dirX:!1,dirY:!1,pageX:0,pageXRange:[0,0],pageY:0,pageYRange:[0,0]},resize:void 0,scroll:function(){},styles:{height:0,heightScroll:0,heightAvailable:0,heightMultiplier:0,width:0,widthScroll:0,widthAvailable:0,widthMultiplier:0,top:0,left:0},trainMinLength:p,x:{ignore:!1,rail:void 0,scrollPercent:0,track:void 0,train:void 0,trainWidth:0},y:{ignore:!1,rail:void 0,scrollPercent:0,track:void 0,train:void 0,trainHeight:0}},f={};return function(){for(h.content=document.createElement("DIV"),h.content.setAttribute(y+"content","");h.instance.firstChild;)h.content.appendChild(h.instance.firstChild);h.instance.appendChild(h.content),h.x.track=document.createElement("DIV"),h.x.track.setAttribute(y+"x-track",""),h.x.rail=document.createElement("DIV"),h.x.rail.setAttribute(y+"x-rail",""),h.x.train=document.createElement("DIV"),h.x.train.setAttribute(y+"x-train",""),h.x.rail.appendChild(h.x.train),h.x.track.appendChild(h.x.rail),h.instance.appendChild(h.x.track),h.y.track=document.createElement("DIV"),h.y.track.setAttribute(y+"y-track",""),h.y.rail=document.createElement("DIV"),h.y.rail.setAttribute(y+"y-rail",""),h.y.train=document.createElement("DIV"),h.y.train.setAttribute(y+"y-train",""),h.y.rail.appendChild(h.y.train),h.y.track.appendChild(h.y.rail),h.instance.appendChild(h.y.track),function(){var t=h.instance.getAttribute("scrollbar-reloaded-type");"scroll"===t?h.scroll=function(t,e){h.instance.scrollLeft=-t,h.instance.scrollTop=-e,h.instance.style.position="static",h.instance.parentElement.style.position="relative"}:"margin"===t?h.scroll=function(t,e){h.content.style.marginLeft=t+"px",h.content.style.marginTop=e+"px"}:(h.scroll=function(t,e){h.content.style.left=t+"px",h.content.style.top=e+"px"},h.content.style.position="relative")}(),c(),s=function(){t.removeEventListener("resize",i),document.removeEventListener("mousemove",f.mousemove),document.removeEventListener("mouseup",f.mouseup)},h.instance.setAttribute(y+"bootstrapped","true"),setTimeout(r,17)}(),{destroy:s,reset:r,update:g}}function s(t,e,a){for(var s in n)for(var r=0,i=n[s].length;r<i;r++)n[s][r][t](e,a)}function r(){Array.prototype.slice.call(document.querySelectorAll("["+u+"]:not(["+y+"bootstrapped])")).forEach(function(t){var e=t.getAttribute("scrollbar-reloaded");if(e.length){var s=e.replace(/[^\-]+\-/,"");n[s]||(n[s]=[]),/master/.test(e)?n["default"].push(new a(t,s)):n[s].push(new a(t))}else n["default"].push(new a(t))})}function i(){s("destroy")}function l(){s("reset")}function o(t,e){s("update",t,e)}var n={"default":[]},c=e||{},p=c.minHandleLength||10,u="scrollbar-reloaded",y=u+"-",d=c.resizeDelay||17;return{bootstrap:r,bootstrapped:n,destroy:i,reset:l,update:o}})}(window);
