/*
  MouseTouchScroll v1.0.0
  (c) 2016 Depth Development. http://depthdev.com
  License: MIT
*/

!function(t){"use strict";return!t.MouseTouchScroll&&void(t.MouseTouchScroll=function(e){function s(e,s){function a(){}function i(){l(),p(),d.styles.left=-(d.styles.widthAvailable*d.x.scrollPercent),d.content.style.left=d.styles.left+"px",d.styles.top=-(d.styles.heightAvailable*d.y.scrollPercent),d.content.style.top=d.styles.top+"px",d.x.train.style.left=d.styles.width*d.x.scrollPercent-d.x.trainWidth*d.x.scrollPercent+"px",d.y.train.style.top=d.styles.height*d.y.scrollPercent-d.y.trainHeight*d.y.scrollPercent+"px",d.x.ignore="false"===d.instance.getAttribute("mouse-touch-scroll-x"),d.y.ignore="false"===d.instance.getAttribute("mouse-touch-scroll-y")}function o(){clearTimeout(d.resize),d.resize=setTimeout(i,h)}function r(t,e){d.styles.left+=t,d.styles.left=d.styles.left<-d.styles.widthAvailable?-d.styles.widthAvailable:d.styles.left>0?0:d.styles.left,d.x.scrollPercent=d.styles.left/-d.styles.widthAvailable,d.styles.top+=e,d.styles.top=d.styles.top<-d.styles.heightAvailable?-d.styles.heightAvailable:d.styles.top>0?0:d.styles.top,d.y.scrollPercent=d.styles.top/-d.styles.heightAvailable,d.scroll(d.x.ignore?0:d.styles.left,d.y.ignore?0:d.styles.top);var s=1-(d.styles.widthAvailable+d.styles.left)/d.styles.widthAvailable,a=d.styles.width*s,i=d.x.trainWidth*s;d.x.train.style.left=a-i+"px";var o=1-(d.styles.heightAvailable+d.styles.top)/d.styles.heightAvailable,r=d.styles.height*o,l=d.y.trainHeight*o;if(d.y.train.style.top=r-l+"px",d.master)for(var c=0,u=n[d.master].length;c<u;c++)n[d.master][c].update(d.x.scrollPercent||0,d.y.scrollPercent||0)}function l(){d.styles.height=d.instance.offsetHeight,d.styles.heightScroll=d.instance.scrollHeight,d.styles.heightAvailable=d.styles.heightScroll-d.styles.height,d.styles.heightMultiplier=d.styles.heightScroll/d.styles.height,d.styles.width=d.instance.offsetWidth,d.styles.widthScroll=d.instance.scrollWidth,d.styles.widthAvailable=d.styles.widthScroll-d.styles.width,d.styles.widthMultiplier=d.styles.widthScroll/d.styles.width}function c(){d.instance.addEventListener("wheel",function(t){t.preventDefault(),t.stopPropagation(),t.wheelDeltaX||t.wheelDeltaY?r(t.wheelDeltaX,t.wheelDeltaY):r(t.deltaMode?16*-t.deltaX:-t.deltaX,t.deltaMode?16*-t.deltaY:-t.deltaY)}),d.x.train.addEventListener("mousedown",function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageXRange=[-t.target.offsetLeft+t.pageX,d.styles.width-t.target.offsetLeft+t.pageX-d.x.trainWidth],d.mouse.pageX=t.pageX,d.mouse.dirX=!0,d.x.track.style.opacity=1,d.x.track.setAttribute("mouse-touch-scroll-x-track","active"),d.y.track.style.opacity=0}),d.y.train.addEventListener("mousedown",function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageYRange=[-t.target.offsetTop+t.pageY,d.styles.height-t.target.offsetTop+t.pageY-d.y.trainHeight],d.mouse.pageY=t.pageY,d.mouse.dirY=!0,d.x.track.style.opacity=0,d.y.track.style.opacity=1,d.y.track.setAttribute("mouse-touch-scroll-y-track","active")}),f.mousemove=function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageX?(r(d.mouse.dirX&&t.pageX>=d.mouse.pageXRange[0]&&t.pageX<=d.mouse.pageXRange[1]?(d.mouse.pageX-t.pageX)*d.styles.widthMultiplier:t.pageX<d.mouse.pageXRange[0]?-d.styles.left:-(d.styles.widthAvailable+d.styles.left),0),d.mouse.pageX=t.pageX):d.mouse.pageY&&(r(0,d.mouse.dirY&&t.pageY>=d.mouse.pageYRange[0]&&t.pageY<=d.mouse.pageYRange[1]?(d.mouse.pageY-t.pageY)*d.styles.heightMultiplier:t.pageY<d.mouse.pageYRange[0]?-d.styles.top:-(d.styles.heightAvailable+d.styles.top)),d.mouse.pageY=t.pageY)},document.addEventListener("mousemove",f.mousemove),f.mouseup=function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageX=0,d.mouse.pageY=0,d.mouse.dirX=!1,d.mouse.dirY=!1,d.x.track.style.removeProperty("opacity"),d.y.track.style.removeProperty("opacity"),d.x.track.setAttribute("mouse-touch-scroll-x-track",""),d.y.track.setAttribute("mouse-touch-scroll-y-track","")},document.addEventListener("mouseup",f.mouseup),d.x.train.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageXRange=[-t.target.offsetLeft+t.touches[0].pageX,d.styles.width-t.target.offsetLeft+t.touches[0].pageX-d.x.trainWidth],d.mouse.pageX=t.touches[0].pageX,d.mouse.dirX=!0,d.x.track.style.opacity=1,d.x.track.setAttribute("mouse-touch-scroll-x-track","active"),d.y.track.style.opacity=0}),d.y.train.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageYRange=[-t.target.offsetTop+t.touches[0].pageY,d.styles.height-t.target.offsetTop+t.touches[0].pageY-d.y.trainHeight],d.mouse.pageY=t.touches[0].pageY,d.mouse.dirY=!0,d.x.track.style.opacity=0,d.y.track.style.opacity=1,d.y.track.setAttribute("mouse-touch-scroll-y-track","active")}),d.content.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageX=t.touches[0].pageX,d.mouse.pageY=t.touches[0].pageY,d.mouse.dirX=!0,d.mouse.dirY=!0,d.x.track.style.opacity=1,d.y.track.style.opacity=1}),d.x.train.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageX&&(r((d.mouse.pageX-t.touches[0].pageX)*d.styles.widthMultiplier,0),d.mouse.pageX=t.touches[0].pageX)}),d.y.train.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation(),d.mouse.pageY&&(r(0,(d.mouse.pageY-t.touches[0].pageY)*d.styles.heightMultiplier),d.mouse.pageY=t.touches[0].pageY)}),d.content.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation(),(d.mouse.pageX||d.mouse.pageY)&&(r(t.touches[0].pageX-d.mouse.pageX,t.touches[0].pageY-d.mouse.pageY),d.mouse.pageX=t.touches[0].pageX,d.mouse.pageY=t.touches[0].pageY)}),d.x.train.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation(),d.x.track.setAttribute("mouse-touch-scroll-x-track",""),d.y.track.setAttribute("mouse-touch-scroll-y-track","")}),d.y.train.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation(),d.x.track.setAttribute("mouse-touch-scroll-x-track",""),d.y.track.setAttribute("mouse-touch-scroll-y-track","")}),d.x.rail.addEventListener("mouseover",function(t){t.preventDefault(),t.stopPropagation(),d.y.track.setAttribute(y+"y-track","hide")}),d.x.rail.addEventListener("mouseleave",function(t){t.preventDefault(),t.stopPropagation(),d.y.track.setAttribute(y+"y-track","")}),d.y.rail.addEventListener("mouseover",function(t){t.preventDefault(),t.stopPropagation(),d.x.track.setAttribute(y+"x-track","hide")}),d.y.rail.addEventListener("mouseleave",function(t){t.preventDefault(),t.stopPropagation(),d.x.track.setAttribute(y+"x-track","")}),d.x.rail.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),e.target===d.x.rail){var s=e.offsetX<t.getComputedStyle(d.x.train,null).getPropertyValue("left").replace(/px/,"")?d.styles.height-20:-d.styles.height+20;r(s,0)}}),d.y.rail.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),e.target===d.y.rail){var s=e.offsetY<t.getComputedStyle(d.y.train,null).getPropertyValue("top").replace(/px/,"")?d.styles.height-20:-d.styles.height+20;r(0,s)}}),t.addEventListener("resize",o)}function p(){d.x.trainWidth=d.styles.width*(d.styles.width/d.styles.widthScroll),d.x.trainWidth=d.x.trainWidth<d.trainMinLength?d.trainMinLength:d.x.trainWidth,d.x.trainWidth>=d.styles.width?(d.instance.overflowX="auto",d.x.track.style.display="none"):(d.x.track.style.display="block",d.x.train.style.width=d.x.trainWidth+"px"),d.y.trainHeight=d.styles.height*(d.styles.height/d.styles.heightScroll),d.y.trainHeight=d.y.trainHeight<d.trainMinLength?d.trainMinLength:d.y.trainHeight,d.y.trainHeight>=d.styles.height?(d.instance.overflowY="auto",d.y.track.style.display="none"):(d.y.track.style.display="block",d.y.train.style.height=d.y.trainHeight+"px")}function g(t,e){r(t*-d.styles.widthAvailable-d.styles.left,e*-d.styles.heightAvailable-d.styles.top)}var d={content:void 0,instance:e,master:s,mouse:{dirX:!1,dirY:!1,pageX:0,pageXRange:[0,0],pageY:0,pageYRange:[0,0]},resize:void 0,scroll:function(){},styles:{height:0,heightScroll:0,heightAvailable:0,heightMultiplier:0,width:0,widthScroll:0,widthAvailable:0,widthMultiplier:0,top:0,left:0},trainMinLength:u,x:{ignore:!1,rail:void 0,scrollPercent:0,track:void 0,train:void 0,trainWidth:0},y:{ignore:!1,rail:void 0,scrollPercent:0,track:void 0,train:void 0,trainHeight:0}},f={};return function(){for(d.content=document.createElement("DIV"),d.content.setAttribute(y+"content","");d.instance.firstChild;)d.content.appendChild(d.instance.firstChild);d.instance.appendChild(d.content),d.x.track=document.createElement("DIV"),d.x.track.setAttribute(y+"x-track",""),d.x.rail=document.createElement("DIV"),d.x.rail.setAttribute(y+"x-rail",""),d.x.train=document.createElement("DIV"),d.x.train.setAttribute(y+"x-train",""),d.x.rail.appendChild(d.x.train),d.x.track.appendChild(d.x.rail),d.instance.appendChild(d.x.track),d.y.track=document.createElement("DIV"),d.y.track.setAttribute(y+"y-track",""),d.y.rail=document.createElement("DIV"),d.y.rail.setAttribute(y+"y-rail",""),d.y.train=document.createElement("DIV"),d.y.train.setAttribute(y+"y-train",""),d.y.rail.appendChild(d.y.train),d.y.track.appendChild(d.y.rail),d.instance.appendChild(d.y.track),function(){var t=d.instance.getAttribute("mouse-touch-scroll-type");"scroll"===t?d.scroll=function(t,e){d.instance.scrollLeft=-t,d.instance.scrollTop=-e,d.instance.style.position="static",d.instance.parentElement.style.position="relative"}:"margin"===t?d.scroll=function(t,e){d.content.style.marginLeft=t+"px",d.content.style.marginTop=e+"px"}:(d.scroll=function(t,e){d.content.style.left=t+"px",d.content.style.top=e+"px"},d.content.style.position="relative")}(),c(),a=function(){t.removeEventListener("resize",o),document.removeEventListener("mousemove",f.mousemove),document.removeEventListener("mouseup",f.mouseup)},d.instance.setAttribute(y+"bootstrapped","true"),setTimeout(i,17)}(),{destroy:a,reset:i,update:g}}function a(t,e,s){for(var a in n)for(var i=0,o=n[a].length;i<o;i++)n[a][i][t](e,s)}function i(){Array.prototype.slice.call(document.querySelectorAll("["+p+"]:not(["+y+"bootstrapped])")).forEach(function(t){var e=t.getAttribute("mouse-touch-scroll");if(e.length){var a=e.replace(/[^\-]+\-/,"");n[a]||(n[a]=[]),/master/.test(e)?n["default"].push(new s(t,a)):n[a].push(new s(t))}else n["default"].push(new s(t))})}function o(){a("destroy")}function r(){a("reset")}function l(t,e){a("update",t,e)}var n={"default":[]},c=e||{},u=c.minHandleLength||10,p="mouse-touch-scroll",y=p+"-",h=c.resizeDelay||17;return{bootstrap:i,bootstrapped:n,destroy:o,reset:r,update:l}})}(window);
